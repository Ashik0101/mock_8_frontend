<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Post product data</title>
  </head>
  <body>
    <form id="form">
      <div>
        <div>
          <label for="name">name</label>
        </div>
        <div>
          <input id="name" type="text" placeholder="name.." />
        </div>

        <!-- description -->
        <div>
          <label for="description"> description</label>
        </div>
        <div>
          <input id="description" type="text" placeholder="description.." />
        </div>

        <!-- category -->
        <div>
          <label for="category">category</label>
        </div>
        <select name="category" id="category">
          <option value="Clothing">Clothing</option>
          <option value="Electronics">Electronics</option>
          <option value="Furniture">Furniture</option>
          <option value="Other">Other</option>
        </select>

        <!-- image -->
        <div>
          <label for="image"> image</label>
        </div>
        <div>
          <input id="image" type="text" placeholder="image.." />
        </div>

        <!-- location -->
        <div>
          <label for="location"> location</label>
        </div>
        <div>
          <input id="location" type="text" placeholder="location.." />
        </div>

        <!-- price -->
        <div>
          <label for="price"> price</label>
        </div>
        <div>
          <input id="price" type="text" placeholder="price.." />
        </div>
      </div>

      <input type="submit" id="submit" />
    </form>
  </body>

  <script>
    const url = "https://mock-8-76ah.onrender.com/product";
    let submitButton = document.getElementById("submit");

    let form = document.getElementById("form");

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      let data = {
        name: form.name.value,
        description: form.description.value,
        price: form.price.value,
        category: form.category.value,
        image: form.image.value,
        location: form.location.value,
      };
      if (
        !data ||
        !description ||
        !price ||
        !category ||
        !image ||
        !localStorage
      ) {
        alert("all fields are required !!");
      } else {
        postProductData(data);
      }
    });

    function postProductData(data) {
      fetch(`${url}`, {
        method: "POST",
        headers: {
          "Content-type": "application/json",
        },
        body: JSON.parse(data),
      })
        .then((res) => {
          return res.json();
        })
        .then((res) => {
          console.log(res);
          alert("data added");
        })
        .catch((err) => {
          console.log("some eror posting data");
        });
    }
  </script>
</html>
